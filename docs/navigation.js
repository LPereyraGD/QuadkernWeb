class t{constructor(t={}){this.sections=[],this.navLinks=null,this.isScrolling=!1,this.scrollTimeout=null,this.currentAnimationId=null,this.config={headerHeight:80,smoothScrollDuration:400,activeLinkClass:"active-nav-link",offsetThreshold:100,scrollVelocity:3,easingType:"cubic",...t},this.init()}init(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>this.setup()):this.setup()}setup(){this.collectSections(),this.setupNavigationLinks(),this.setupScrollListener(),this.setupKeyboardNavigation()}collectSections(){this.sections=["inicio","servicios","proyectos","equipo","contacto"].map(t=>{const i=document.getElementById(t);return i?{id:t,element:i,top:0,bottom:0}:null}).filter(t=>null!==t),this.updateSectionPositions()}updateSectionPositions(){this.sections.forEach(t=>{const i=t.element.getBoundingClientRect();t.top=window.scrollY+i.top,t.bottom=window.scrollY+i.bottom})}setupNavigationLinks(){this.navLinks=document.querySelectorAll('a[href^="#"]'),this.navLinks.forEach(t=>{t.addEventListener("click",t=>this.handleNavigationClick(t)),t.classList.add("nav-link")})}handleNavigationClick(t){t.preventDefault();const i=t.currentTarget,n=i.getAttribute("href");if(!n||!n.startsWith("#"))return;const e=n.substring(1);this.smoothScrollTo(e),this.updateActiveLink(i)}smoothScrollTo(t){const i=this.sections.find(i=>i.id===t);if(!i)return;this.currentAnimationId&&(cancelAnimationFrame(this.currentAnimationId),this.currentAnimationId=null),this.isScrolling=!0;const n=Math.max(0,i.top-this.config.headerHeight);this.animateScroll(n)}animateScroll(t){const i=window.scrollY,n=t-i,e=Math.max(300,Math.min(800,Math.abs(n)/this.config.scrollVelocity)),o=performance.now(),s=a=>{const c=Math.min((a-o)/e,1);let r;switch(this.config.easingType){case"elastic":r=(t=>{if(0===t)return 0;if(1===t)return 1;const i=2.5949095;return.5>t?Math.pow(2*t,2)*(7.189819*t-i)/2:(Math.pow(2*t-2,2)*((i+1)*(2*t-2)+i)+2)/2})(c);break;case"cubic":r=1-Math.pow(1-c,3);break;default:r=c}const l=i+n*r;window.scrollTo(0,Math.round(l)),1>c?this.currentAnimationId=requestAnimationFrame(s):(window.scrollTo(0,t),this.isScrolling=!1,this.currentAnimationId=null)};this.currentAnimationId=requestAnimationFrame(s)}updateActiveLink(t){this.navLinks&&(this.navLinks.forEach(t=>{t.classList.remove(this.config.activeLinkClass)}),t&&t.classList.add(this.config.activeLinkClass))}setupScrollListener(){let t=!1;window.addEventListener("scroll",()=>{t||(requestAnimationFrame(()=>{this.isScrolling||this.updateActiveSection(),t=!1}),t=!0)},{passive:!0}),window.addEventListener("resize",()=>{this.updateSectionPositions()})}updateActiveSection(){const t=window.scrollY+this.config.headerHeight+this.config.offsetThreshold;let i=null;for(const n of this.sections)if(t>=n.top&&t<n.bottom){i=n;break}if(i||(i=this.sections.find(i=>t>=i.top)||this.sections[0]),i&&this.navLinks){const t=Array.from(this.navLinks).find(t=>t.getAttribute("href")==="#"+i.id);t&&this.updateActiveLink(t)}}setupKeyboardNavigation(){document.addEventListener("keydown",t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement))switch(t.key){case"Home":t.preventDefault(),this.smoothScrollTo("inicio");break;case"End":t.preventDefault(),this.smoothScrollTo("contacto");break;case"ArrowUp":t.preventDefault(),this.navigateToAdjacentSection(-1);break;case"ArrowDown":t.preventDefault(),this.navigateToAdjacentSection(1)}})}navigateToAdjacentSection(t){const i=window.scrollY+this.config.headerHeight+this.config.offsetThreshold;let n=null;n=t>0?this.sections.find(t=>t.top>i):[...this.sections].reverse().find(t=>t.top<i),n&&this.smoothScrollTo(n.id)}navigateTo(t){this.smoothScrollTo(t)}getSections(){return[...this.sections]}updateConfig(t){this.config={...this.config,...t},this.updateSectionPositions()}setEasingType(t){this.config.easingType=t}setScrollVelocity(t){this.config.scrollVelocity=Math.max(.5,Math.min(5,t))}setScrollDuration(t){this.config.smoothScrollDuration=Math.max(200,Math.min(1500,t))}stopScrolling(){this.currentAnimationId&&(cancelAnimationFrame(this.currentAnimationId),this.currentAnimationId=null),this.isScrolling=!1}destroy(){this.stopScrolling(),this.navLinks&&this.navLinks.forEach(t=>{t.removeEventListener("click",this.handleNavigationClick)})}}export{t as QuadKernNavigation};if("undefined"!=typeof window){const i=new t;window.QuadKernNavigation=t,window.navigation=i}